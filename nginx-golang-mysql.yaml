namespace: nginx-golang-mysql
nginx-golang-mysql:
  defines: runnable
  metadata:
    name: nginx-golang-mysql
    description: A Golang application with a MySQL database served by an Nginx proxy.
    icon: https://emojiapi.dev/api/v1/robot.svg
  containers:
    nginx-golang-mysql:
      build: .
      dockerfile: Dockerfile
  services:
    proxy:
      container: nginx-golang-mysql
      port: 80
      host-port: 80
      publish: false
      protocol: TCP
      description: The port for the Nginx proxy service.
  connections:
    database:
      target: nginx-golang-mysql/db
      service: monk-mysql-db
  variables:
    mysql-database:
      env: MYSQL_DATABASE
      type: string
      description: The name of the MySQL database.
      value: example
    mysql-root-password-file:
      env: MYSQL_ROOT_PASSWORD_FILE
      type: string
      description: The path to the file containing the MySQL root password.
      value: '!!!SETME-USE-SECRETS!!!'
db:
  defines: runnable
  inherits: monk-mysql/db
stack:
  defines: group
  members:
    - nginx-golang-mysql/nginx-golang-mysql
    - nginx-golang-mysql/db
