namespace: nginx-golang-mysql
nginx-golang-mysql:
  defines: runnable
  metadata:
    name: nginx-golang-mysql
    description: >-
      The application is a web blog system using Go, MySQL database and Nginx as
      a proxy.
    icon: https://emojiapi.dev/api/v1/globe_with_meridians.svg
  containers:
    nginx-golang-mysql:
      build: .
      dockerfile: backend/Dockerfile
  services:
    http:
      container: nginx-golang-mysql
      port: 80
      host-port: 80
      publish: false
      protocol: TCP
      description: The main port the application is exposed on
  connections:
    mysql:
      target: nginx-golang-mysql/db
      service: monk-mysql-db
  variables:
    mysql-database:
      env: MYSQL_DATABASE
      type: string
      description: The MySQL database to connect to.
      value: example
    mysql-root-password-file:
      env: MYSQL_ROOT_PASSWORD_FILE
      type: string
      description: The path to the file containing the MySQL root password.
      value: '!!!SETME-USE-SECRETS!!!'
db:
  defines: runnable
  inherits: monk-mysql/db
stack:
  defines: group
  members:
    - nginx-golang-mysql/nginx-golang-mysql
    - nginx-golang-mysql/db
